<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1.4.3/css/pico.min.css">
    <title>
        BonsaiDb Commerce Benchmark</title>
    <style>
        .diagram {
            margin-left: auto;
            margin-right: auto;
            display: block;
            max-width: 100%;
        }
    </style>
</head>

<body>
    <main class="container">
        

<h1>BonsaiDb Commerce Benchmark</h1>

<p><a href-"https://github.com/khonsulabs/bonsaidb/tree/main/benchmarks/benches/commerce">This
        benchmark suite</a> is designed to simulate the types of loads that an ecommerce
    application might see under different levels of concurrency and traffic
    patterns. As with all benchmark suites, the results should not be taken as proof
    that any datbase may or may not perform for any particular application. Each
    application's needs differ greatly, and this benchmark is designed at helping
    BonsaiDb's developers notice areas for improvement.</p>

<img src="Overview.png" alt="Comparison of all backends across all suites" class="diagram" />

<br />

<table>
    <thead>
        <tr>
            <th scope="col">Dataset Size</th>
            <th scope="col">Traffic Pattern</th>
            <th scope="col">Concurrency</th>
            
            <th scope="col">bonsaidb-local</th>
            
            <th scope="col">bonsaidb-local+lz4</th>
            
            <th scope="col">bonsaidb-quic</th>
            
            <th scope="col">bonsaidb-ws</th>
            
            <th scope="col">postgresql</th>
            
            <th scope="col">Report</th>
        </tr>
    </thead>
    <tbody>
        
        <tr>
            <td>small</a></td>
            <td>balanced</a></td>
            <td>1</td>
            
            <td>1.320s</td>
            
            <td>1.258s</td>
            
            <td>4.667s</td>
            
            <td>4.321s</td>
            
            <td>5.818s</td>
            
            <td><a href="small-balanced&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>balanced</a></td>
            <td>2</td>
            
            <td>1.498s</td>
            
            <td>1.483s</td>
            
            <td>5.425s</td>
            
            <td>4.646s</td>
            
            <td>8.008s</td>
            
            <td><a href="small-balanced&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>balanced</a></td>
            <td>4</td>
            
            <td>2.435s</td>
            
            <td>2.228s</td>
            
            <td>8.918s</td>
            
            <td>7.167s</td>
            
            <td>13.56s</td>
            
            <td><a href="small-balanced&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>readheavy</a></td>
            <td>1</td>
            
            <td>900.3ms</td>
            
            <td>870.7ms</td>
            
            <td>4.053s</td>
            
            <td>3.491s</td>
            
            <td>3.862s</td>
            
            <td><a href="small-readheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>readheavy</a></td>
            <td>2</td>
            
            <td>973.0ms</td>
            
            <td>1.042s</td>
            
            <td>4.191s</td>
            
            <td>3.406s</td>
            
            <td>5.334s</td>
            
            <td><a href="small-readheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>readheavy</a></td>
            <td>4</td>
            
            <td>1.577s</td>
            
            <td>1.279s</td>
            
            <td>6.732s</td>
            
            <td>5.155s</td>
            
            <td>8.429s</td>
            
            <td><a href="small-readheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>writeheavy</a></td>
            <td>1</td>
            
            <td>5.078s</td>
            
            <td>5.506s</td>
            
            <td>13.07s</td>
            
            <td>11.63s</td>
            
            <td>25.10s</td>
            
            <td><a href="small-writeheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>writeheavy</a></td>
            <td>2</td>
            
            <td>7.243s</td>
            
            <td>7.823s</td>
            
            <td>16.61s</td>
            
            <td>13.86s</td>
            
            <td>37.61s</td>
            
            <td><a href="small-writeheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>small</a></td>
            <td>writeheavy</a></td>
            <td>4</td>
            
            <td>12.93s</td>
            
            <td>14.02s</td>
            
            <td>26.89s</td>
            
            <td>22.44s</td>
            
            <td>70.64s</td>
            
            <td><a href="small-writeheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>balanced</a></td>
            <td>1</td>
            
            <td>1.566s</td>
            
            <td>1.963s</td>
            
            <td>5.119s</td>
            
            <td>4.550s</td>
            
            <td>11.60s</td>
            
            <td><a href="medium-balanced&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>balanced</a></td>
            <td>2</td>
            
            <td>1.714s</td>
            
            <td>1.882s</td>
            
            <td>5.701s</td>
            
            <td>4.890s</td>
            
            <td>14.04s</td>
            
            <td><a href="medium-balanced&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>balanced</a></td>
            <td>4</td>
            
            <td>2.658s</td>
            
            <td>2.850s</td>
            
            <td>9.341s</td>
            
            <td>7.159s</td>
            
            <td>20.16s</td>
            
            <td><a href="medium-balanced&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>readheavy</a></td>
            <td>1</td>
            
            <td>1.079s</td>
            
            <td>1.125s</td>
            
            <td>4.091s</td>
            
            <td>3.648s</td>
            
            <td>9.899s</td>
            
            <td><a href="medium-readheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>readheavy</a></td>
            <td>2</td>
            
            <td>1.267s</td>
            
            <td>1.307s</td>
            
            <td>4.616s</td>
            
            <td>3.738s</td>
            
            <td>11.32s</td>
            
            <td><a href="medium-readheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>readheavy</a></td>
            <td>4</td>
            
            <td>1.634s</td>
            
            <td>1.713s</td>
            
            <td>7.154s</td>
            
            <td>5.286s</td>
            
            <td>14.66s</td>
            
            <td><a href="medium-readheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>writeheavy</a></td>
            <td>1</td>
            
            <td>5.030s</td>
            
            <td>5.507s</td>
            
            <td>12.77s</td>
            
            <td>11.34s</td>
            
            <td>34.28s</td>
            
            <td><a href="medium-writeheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>writeheavy</a></td>
            <td>2</td>
            
            <td>7.766s</td>
            
            <td>7.920s</td>
            
            <td>16.57s</td>
            
            <td>14.10s</td>
            
            <td>51.18s</td>
            
            <td><a href="medium-writeheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>medium</a></td>
            <td>writeheavy</a></td>
            <td>4</td>
            
            <td>12.74s</td>
            
            <td>13.76s</td>
            
            <td>26.68s</td>
            
            <td>22.34s</td>
            
            <td>90.98s</td>
            
            <td><a href="medium-writeheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>balanced</a></td>
            <td>1</td>
            
            <td>2.586s</td>
            
            <td>2.577s</td>
            
            <td>6.318s</td>
            
            <td>5.847s</td>
            
            <td>42.16s</td>
            
            <td><a href="large-balanced&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>balanced</a></td>
            <td>2</td>
            
            <td>2.780s</td>
            
            <td>2.969s</td>
            
            <td>7.170s</td>
            
            <td>5.844s</td>
            
            <td>45.83s</td>
            
            <td><a href="large-balanced&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>balanced</a></td>
            <td>4</td>
            
            <td>3.805s</td>
            
            <td>4.230s</td>
            
            <td>10.55s</td>
            
            <td>8.349s</td>
            
            <td>51.06s</td>
            
            <td><a href="large-balanced&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>readheavy</a></td>
            <td>1</td>
            
            <td>2.236s</td>
            
            <td>2.125s</td>
            
            <td>5.165s</td>
            
            <td>4.762s</td>
            
            <td>41.57s</td>
            
            <td><a href="large-readheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>readheavy</a></td>
            <td>2</td>
            
            <td>2.377s</td>
            
            <td>2.629s</td>
            
            <td>5.745s</td>
            
            <td>5.258s</td>
            
            <td>43.06s</td>
            
            <td><a href="large-readheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>readheavy</a></td>
            <td>4</td>
            
            <td>2.731s</td>
            
            <td>2.795s</td>
            
            <td>8.377s</td>
            
            <td>6.988s</td>
            
            <td>47.68s</td>
            
            <td><a href="large-readheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>writeheavy</a></td>
            <td>1</td>
            
            <td>6.440s</td>
            
            <td>6.769s</td>
            
            <td>14.41s</td>
            
            <td>13.09s</td>
            
            <td>71.88s</td>
            
            <td><a href="large-writeheavy&#x2F;1&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>writeheavy</a></td>
            <td>2</td>
            
            <td>8.663s</td>
            
            <td>9.262s</td>
            
            <td>17.83s</td>
            
            <td>15.06s</td>
            
            <td>93.41s</td>
            
            <td><a href="large-writeheavy&#x2F;2&#x2F;index.html">Full Report</a></td>
        </tr>
        
        <tr>
            <td>large</a></td>
            <td>writeheavy</a></td>
            <td>4</td>
            
            <td>15.45s</td>
            
            <td>15.78s</td>
            
            <td>30.46s</td>
            
            <td>23.20s</td>
            
            <td>142.9s</td>
            
            <td><a href="large-writeheavy&#x2F;4&#x2F;index.html">Full Report</a></td>
        </tr>
        
    </tbody>
</table>

<h3>Dataset Sizes</h3>
<p>The three dataset sizes are named "small", "medium", and "large". All
    databases being benchmarked can handle much larger dataset sizes than "large",
    but it is impractical at this time to run larger benchmarks on a regular basis.
    Each run's individual page will show the initial data set breakdown by type.</p>

<h3>Traffic Patterns</h3>
<p>This suite uses a probability-based system to generate plans for agents to
    process concurrently. These plans operate in a "funnel" pattern of searching,
    adding to cart, checking out, and reviewing the purchased items. Each stage in
    this funnel is assigned a probabilty, and these probabilities are tweaked to
    simulate read-heavy traffic patterns that perform more searches than purchasing,
    write-heavy traffic patterns where most plans result in purchasing and reviewing
    the products, and a balanced traffic pattern that is meant to simulate moderate
    amount of write traffic.</p>

<h3>Concurrency</h3>
<p>The suite is configured to run the plans up to three times, depending on the
    number of CPU cores present: 1 agent, 1 agent per core, and 2 agents per
    core.</p>


    </main>

    <footer class="container">
        <hr />
        <small>
            This report was generated at 2022-04-15T14:34:16.497259543Z and git revision
            <a href="https://github.com/khonsulabs/bonsaidb/tree/cc1de54b044ea47ebf742f30bc7889d91b4ce4b0">
                cc1de54
            </a>.
        </small>
    </footer>
</body>

</html>